# Temporarily disabled while updating technologies in the stack
# name: Deploy API
# on:
#   push:
#     branches:
#       - main
#     paths:
#       - 'api/**'
#   workflow_dispatch:
name: Deploy API (disabled)
on: workflow_dispatch

jobs:
  publish:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      deployments: write
    name: Cloudflare Workers
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Install Dependencies
        uses: ./.github/actions/install-deps

      - name: Publish
        uses: cloudflare/wrangler-action@2.0.0
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          workingDirectory: ./api
          command: deploy --outdir dist

